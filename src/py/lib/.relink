##############################################################################
##
##       Copyright (C) 2023-2024 Frank Eskesen.
##
##       This file is free content, distributed under the GNU General
##       Public License, version 3.0.
##       (See accompanying file LICENSE.GPL-3.0 or the original
##       contained within https://www.gnu.org/licenses/gpl-3.0.en.html)
##
##############################################################################
##
## Title-
##       .relink
##
## Purpose-
##       Build: Install library link
##
## Last change date-
##       2024/02/10
##
## Implementation notes-
##       ** MUST ONLY ** be invoked from Makefile.STD
##
##############################################################################

##############################################################################
## Get directory containing this script
##############################################################################
THIS_DIR=$(dirname $0)
cd $THIS_DIR
THIS_DIR=`pwd -P`
[[ $? != 0 ]] && { echo "PWD error"; exit 1; }

##############################################################################
## Get Python site-packages directory
##############################################################################
SITE_DIR=`python -c "import sysconfig; print(sysconfig.get_path('purelib'))"`
[[ $? != 0 ]] && { echo "Cannot find site-packages"; exit 1; }

##############################################################################
## Install library link
##
## Implementation note:
##    It's possible that the python implementation did not create the
##    $SITE_DIR directory. For now, if it's missing create it manually.
##############################################################################
echo SITE_DIR $SITE_DIR
echo THIS_DIR $THIS_DIR
exit 0

echo sudo ln -snf $THIS_DIR $SITE_DIR/lib
sudo ln -snf $THIS_DIR $SITE_DIR/lib
