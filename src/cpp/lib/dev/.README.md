<!-- -------------------------------------------------------------------------
//
//       Copyright (C) 2022 Frank Eskesen.
//
//       This file is free content, distributed under the MIT license.
//       (See accompanying file LICENSE.MIT or the original contained
//       within https://opensource.org/licenses/MIT)
//
//----------------------------------------------------------------------------
//
// Title-
//       ~/src/lib/dev/.README.md
//
// Purpose-
//       DEV library description
//
// Last change date-
//       2022/10/16
//
-------------------------------------------------------------------------- -->

# ~/src/lib/dev/.README.md

Copyright (C) 2022 Frank Eskesen.

This file is free content, distributed under the MIT license.
(See accompanying file LICENSE.MIT or the original contained
within https://opensource.org/licenses/MIT)

----

This README describes the DEV (development) library.
This library is a development test library, intended as a placeholder for
partially developed code intended for eventual inclusion in the PUB library.

This library is currently built and tested from ~/obj/cpp/lib/dev/Test. It is
not updated using make from  ~/obj/cpp/lib/.

----

This library currently contains HTTP client and server code in the style
used by NODE.js modules.

For a simpler and more thorough HTTP client/server example, see

    ~/src/cpp/lib/pub/Test/TestSock.cpp.

----

### Code structure

This is a documentation placeholder.
The library structure changes too often to accurately document it here.

<!-- -------------------------------- | ---------------------------------- -->

```
                                    Agent
                                     / \
                 /------------------/   \------------------\
                /                                           \
          ClientAgent                                   ServerAgent
               |                                             |
             Client -------------- connect --------------> Listen
               |                                             |
             Client <-------------- socket --------------> Server
               |                  read/write                 |
           (enqueue)                                     (enqueue)
               |                                             |
          ClientStream                                  ServerStream
               |                                             |
 (ClientRequest, on_response)                   (on_request, ServerResponse)
               |                                             |
           ClientApp                                     ServerApp
```

To be decided: Where is/are the Select(s)?
Just one in Agent or one each in ClientAgent and ServerAgent?

----

#### Client

This is a documentation placeholder.
The library structure changes too often to accurately document it here.

- Created by ClientApp invoking ClientAgent::connect
- ClientAgent maps all Clients (how with multiple identical connections?)
- Can contain either ClientHTTP1 or ClientHTTP2 protocol
  - Protocol HTTP1 -> HTTP2 migration allowed, but not the reverse
  - Multiple Clients may connect using the same Listen

Client operation:

```
                                     TBD
                                     / \

```

----
