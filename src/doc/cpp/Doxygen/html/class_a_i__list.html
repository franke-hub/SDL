<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: AI_list&lt; T &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="class_a_i__list-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">AI_list&lt; T &gt; Class Template Reference</div></div>
</div><!--header-->
<div class="contents">

<p>An atomic container with fixed time element insertion and iteration.  
 <a href="class_a_i__list.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_list_8h_source.html">List.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_a_i__list_1_1_link.html">Link</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ad3527ddda3a045f8f2369b0eda904f83"><td class="memItemLeft" align="right" valign="top"><a id="ad3527ddda3a045f8f2369b0eda904f83" name="ad3527ddda3a045f8f2369b0eda904f83"></a>
typedef T&#160;</td><td class="memItemRight" valign="bottom"><b>value_type</b></td></tr>
<tr class="separator:ad3527ddda3a045f8f2369b0eda904f83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0ffcd55afbe74a85478473b542f124f"><td class="memItemLeft" align="right" valign="top"><a id="ab0ffcd55afbe74a85478473b542f124f" name="ab0ffcd55afbe74a85478473b542f124f"></a>
typedef value_type *&#160;</td><td class="memItemRight" valign="bottom"><b>pointer</b></td></tr>
<tr class="separator:ab0ffcd55afbe74a85478473b542f124f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4511d7652725b1dc9af037477a7484e4"><td class="memItemLeft" align="right" valign="top"><a id="a4511d7652725b1dc9af037477a7484e4" name="a4511d7652725b1dc9af037477a7484e4"></a>
typedef value_type &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>reference</b></td></tr>
<tr class="separator:a4511d7652725b1dc9af037477a7484e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad241298c90154e93e5596f834852a5fe"><td class="memItemLeft" align="right" valign="top"><a id="ad241298c90154e93e5596f834852a5fe" name="ad241298c90154e93e5596f834852a5fe"></a>
typedef <a class="el" href="class_a_i__list.html">AI_list</a>&lt; T &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>_Self</b></td></tr>
<tr class="separator:ad241298c90154e93e5596f834852a5fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c38a56c66f670f1953251572a1262f9"><td class="memItemLeft" align="right" valign="top"><a id="a9c38a56c66f670f1953251572a1262f9" name="a9c38a56c66f670f1953251572a1262f9"></a>
typedef <a class="el" href="struct___a_i__iter.html">_AI_iter</a>&lt; T &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>iterator</b></td></tr>
<tr class="separator:a9c38a56c66f670f1953251572a1262f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4e143fb6a85371efd6e97cbc1d8ec226"><td class="memItemLeft" align="right" valign="top"><a id="a4e143fb6a85371efd6e97cbc1d8ec226" name="a4e143fb6a85371efd6e97cbc1d8ec226"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>debug</b> (const char *info=&quot;&quot;)</td></tr>
<tr class="separator:a4e143fb6a85371efd6e97cbc1d8ec226"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a884b2757535d564fce6be15ede9793a6"><td class="memItemLeft" align="right" valign="top"><a id="a884b2757535d564fce6be15ede9793a6" name="a884b2757535d564fce6be15ede9793a6"></a>
<a class="el" href="struct___a_i__iter.html">iterator</a>&#160;</td><td class="memItemRight" valign="bottom"><b>begin</b> () noexcept</td></tr>
<tr class="separator:a884b2757535d564fce6be15ede9793a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04cec68fc431ee8200b031b9dd105d1b"><td class="memItemLeft" align="right" valign="top"><a id="a04cec68fc431ee8200b031b9dd105d1b" name="a04cec68fc431ee8200b031b9dd105d1b"></a>
<a class="el" href="struct___a_i__iter.html">iterator</a>&#160;</td><td class="memItemRight" valign="bottom"><b>end</b> () noexcept</td></tr>
<tr class="separator:a04cec68fc431ee8200b031b9dd105d1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fe9ac8c251948a7326740cabf62fec4"><td class="memItemLeft" align="right" valign="top">pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_i__list.html#a0fe9ac8c251948a7326740cabf62fec4">fifo</a> (pointer link)</td></tr>
<tr class="memdesc:a0fe9ac8c251948a7326740cabf62fec4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread-safe FIFO ordering <a class="el" href="struct_a_i__list_1_1_link.html">Link</a> insertion.  <a href="class_a_i__list.html#a0fe9ac8c251948a7326740cabf62fec4">More...</a><br /></td></tr>
<tr class="separator:a0fe9ac8c251948a7326740cabf62fec4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61410fc38539610762c6d15ddc85d267"><td class="memItemLeft" align="right" valign="top"><a id="a61410fc38539610762c6d15ddc85d267" name="a61410fc38539610762c6d15ddc85d267"></a>
pointer&#160;</td><td class="memItemRight" valign="bottom"><b>get_tail</b> (void) const</td></tr>
<tr class="separator:a61410fc38539610762c6d15ddc85d267"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab789f4e0cbc3df86db1af2fb5c0fbf63"><td class="memItemLeft" align="right" valign="top"><a id="ab789f4e0cbc3df86db1af2fb5c0fbf63" name="ab789f4e0cbc3df86db1af2fb5c0fbf63"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>is_coherent</b> (void) const</td></tr>
<tr class="separator:ab789f4e0cbc3df86db1af2fb5c0fbf63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b868c042e753ee8aff400a59a9ee9b8"><td class="memItemLeft" align="right" valign="top"><a id="a5b868c042e753ee8aff400a59a9ee9b8" name="a5b868c042e753ee8aff400a59a9ee9b8"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>is_empty</b> (void) const</td></tr>
<tr class="separator:a5b868c042e753ee8aff400a59a9ee9b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affbf7c7571444b671acf1cfc93b99b90"><td class="memItemLeft" align="right" valign="top"><a id="affbf7c7571444b671acf1cfc93b99b90" name="affbf7c7571444b671acf1cfc93b99b90"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>is_on_list</b> (pointer link) const</td></tr>
<tr class="separator:affbf7c7571444b671acf1cfc93b99b90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af56ae98704c9c7a8c78ffdeaf43f4072"><td class="memItemLeft" align="right" valign="top"><a id="af56ae98704c9c7a8c78ffdeaf43f4072" name="af56ae98704c9c7a8c78ffdeaf43f4072"></a>
pointer&#160;</td><td class="memItemRight" valign="bottom"><b>reset</b> (void)</td></tr>
<tr class="separator:af56ae98704c9c7a8c78ffdeaf43f4072"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af470d4ab5581f718e70ceb51e940a3f0"><td class="memItemLeft" align="right" valign="top">pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_a_i__list.html#af470d4ab5581f718e70ceb51e940a3f0">reset</a> (void *tail) noexcept</td></tr>
<tr class="memdesc:af470d4ab5581f718e70ceb51e940a3f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atomically replace the <a class="el" href="class_list.html">List</a>.  <a href="class_a_i__list.html#af470d4ab5581f718e70ceb51e940a3f0">More...</a><br /></td></tr>
<tr class="separator:af470d4ab5581f718e70ceb51e940a3f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:adb14bd8ba43ad80dc0f464cb1e9f52d7"><td class="memItemLeft" align="right" valign="top"><a id="adb14bd8ba43ad80dc0f464cb1e9f52d7" name="adb14bd8ba43ad80dc0f464cb1e9f52d7"></a>
std::atomic&lt; pointer &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>_tail</b> = nullptr</td></tr>
<tr class="separator:adb14bd8ba43ad80dc0f464cb1e9f52d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;class T&gt;<br />
class AI_list&lt; T &gt;</div><p >An atomic container with fixed time element insertion and iteration. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>The type of the element, which <em>must</em> be a subclass of AI_list&lt;T&gt;::Link.</td></tr>
  </table>
  </dd>
</dl>
<p>Two classes of users can simultaneously access an AI_List&lt;T&gt;. <em>Producers</em> atomically add links to the list using the lock-free <a class="el" href="class_a_i__list.html#a0fe9ac8c251948a7326740cabf62fec4" title="Thread-safe FIFO ordering Link insertion.">fifo()</a> method. There may be any number of <em>producer</em> threads. <em>Consumers</em> serially use all other <a class="el" href="class_a_i__list.html" title="An atomic container with fixed time element insertion and iteration.">AI_list</a> methods. Each <a class="el" href="class_a_i__list.html" title="An atomic container with fixed time element insertion and iteration.">AI_list</a> only supports a single concurrent <em>consumer</em>.</p>
<p >Note the <a class="el" href="class_a_i__list.html#a0fe9ac8c251948a7326740cabf62fec4" title="Thread-safe FIFO ordering Link insertion.">fifo()</a> method returns the previous _tail, the newest item on the <a class="el" href="class_list.html">List</a>. If nullptr is returned, the <a class="el" href="class_list.html">List</a> went from idle into active state.</p>
<p >The begin() method creates an input_iterator in linear time, first removing all Links and then reversing that reversely inserted list. Those links, now in FIFO order, are presented to the consumer. Addionally, this input iterator automatically handles links added to the <a class="el" href="class_list.html">List</a> while iterating without changing its state from active to idle (empty.) </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a0fe9ac8c251948a7326740cabf62fec4" name="a0fe9ac8c251948a7326740cabf62fec4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fe9ac8c251948a7326740cabf62fec4">&#9670;&nbsp;</a></span>fifo()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pointer <a class="el" href="class_a_i__list.html">AI_list</a>&lt; T &gt;::fifo </td>
          <td>(</td>
          <td class="paramtype">pointer&#160;</td>
          <td class="paramname"><em>link</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Thread-safe FIFO ordering <a class="el" href="struct_a_i__list_1_1_link.html">Link</a> insertion. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">link</td><td>The <a class="el" href="struct_a_i__list_1_1_link.html">Link</a> to insert.</td></tr>
  </table>
  </dd>
</dl>
<p>Inserts a <a class="el" href="struct_a_i__list_1_1_link.html">Link</a> into the list such that the begin() iterator has FIFO ordering. The <a class="el" href="class_list.html">List</a> itself has LIFO ordering. </p>

</div>
</div>
<a id="af470d4ab5581f718e70ceb51e940a3f0" name="af470d4ab5581f718e70ceb51e940a3f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af470d4ab5581f718e70ceb51e940a3f0">&#9670;&nbsp;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pointer <a class="el" href="class_a_i__list.html">AI_list</a>&lt; T &gt;::reset </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>tail</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Atomically replace the <a class="el" href="class_list.html">List</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tail</td><td>The tail pseudo-link that replaces the _List. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The set of removed links (tail-&gt;pointer-&gt;...-&gt;nullptr)</dd></dl>
<p>Note: The tail parameter is a pseudo-link. The first inserted <a class="el" href="struct_a_i__list_1_1_link.html">Link</a> points to it, but tail is not a <a class="el" href="struct_a_i__list_1_1_link.html">Link</a>. It doesn't point anywhere.</p>
<div class="fragment"><div class="line">{ [[atomic]]</div>
<div class="line">  <span class="keywordflow">if</span>( _list::_tail == <span class="keyword">nullptr</span> )</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">{ [[atomic]]</div>
<div class="line">  <span class="keywordflow">if</span>( _list::_tail == tail )</div>
<div class="line">  {</div>
<div class="line">    _list::_tail= <span class="keyword">nullptr</span>;</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">{ [[atomic]]</div>
<div class="line">  pointer prev= _list::_tail;</div>
<div class="line">  pointer _tail= (pointer)tail; <span class="comment">// (tail is a pseudo-link)</span></div>
<div class="line">  <span class="keywordflow">return</span> prev;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/cygdrive/c/home/data/home/src/cpp/inc/pub/bits/<a class="el" href="bits_2_list_8h_source.html">List.h</a></li>
<li>/cygdrive/c/home/data/home/src/cpp/inc/pub/<a class="el" href="_list_8h_source.html">List.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
